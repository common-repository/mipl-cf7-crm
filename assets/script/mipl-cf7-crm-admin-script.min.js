const{__:__}=wp.i18n;jQuery(document).ready((function(){if(jQuery("body").find("#mipl_cf7_crm_details").length<1)return!1;switch(jQuery(".mipl_cf7_crm_API_keys,.mipl_cf7_crm_bearer_token,.mipl_cf7_crm_basic_auth,.mipl_cf7_crm_oAuth").hide(),jQuery(".mipl_cf7_crm_auth_types").val()){case"api_keys":jQuery(".mipl_cf7_crm_API_keys").show(0);break;case"bearer_token":jQuery(" .mipl_cf7_crm_bearer_token").show(0);break;case"basic_auth":jQuery(" .mipl_cf7_crm_basic_auth").show(0);break;case"oauth_2.0":jQuery(" .mipl_cf7_crm_oAuth").show(0)}"application/json"==jQuery(".mipl_cf7_crm_content_type").val()?jQuery(".mipl_crm_requesting_body").show():jQuery(".mipl_crm_requesting_body").hide();var e=jQuery(".mipl_cf7_requesting_method").val();if(jQuery(".mipl_cf7_auth_body").css("display","block"),"GET"!=e&&"DELETE"!=e||(jQuery("#mipl_cf7_requesting_body").val(""),jQuery(".mipl_cf7_auth_body").css("display","none"),jQuery("#mipl_cf7_authorization_body").css("display","none")),jQuery(".mipl_cf7_crm_auth_types").on("change",(function(){var e=jQuery(this).val();"api_keys"==e&&(jQuery(" .mipl_cf7_crm_API_keys").show(),jQuery(".mipl_cf7_crm_bearer_token,.mipl_cf7_crm_basic_auth,.mipl_cf7_crm_oAuth").hide()),"bearer_token"==e&&(jQuery(" .mipl_cf7_crm_bearer_token").show(),jQuery(".mipl_cf7_crm_API_keys,.mipl_cf7_crm_basic_auth,.mipl_cf7_crm_oAuth").hide()),"basic_auth"==e&&(jQuery(" .mipl_cf7_crm_basic_auth").show(),jQuery(".mipl_cf7_crm_API_keys,.mipl_cf7_crm_bearer_token,.mipl_cf7_crm_oAuth").hide()),"oauth_2.0"==e&&(jQuery(" .mipl_cf7_crm_oAuth").show(),jQuery(".mipl_cf7_crm_API_keys,.mipl_cf7_crm_bearer_token,.mipl_cf7_crm_basic_auth").hide()),""==e&&jQuery(".mipl_cf7_crm_API_keys,.mipl_cf7_crm_bearer_token,.mipl_cf7_crm_basic_auth,.mipl_cf7_crm_oAuth").hide()})),jQuery(".mipl_cf7_crm_content_type").on("change",(function(){"application/json"==jQuery(this).val()?jQuery(".mipl_crm_requesting_body").show():jQuery(".mipl_crm_requesting_body").hide()})),jQuery(".mipl_cf7_headers_extra_fields_button").on("click",(function(){jQuery(document).find(".updated_extra_fields_table").append(jQuery("#add_header_extra_fields").html())})),jQuery(".mipl_cf7_extra_fields_table").on("click",".remove_extra_fields_button",(function(){var e=__("Do you want to delete?");if(confirm(e))return jQuery(this).parents(".mipl_cf7_extra_fields_table_row").remove(),!1})),jQuery(".mipl_cf7_crm_tabs_wrapper").on("click",".reset",(function(){var e=jQuery(this).closest(".mipl_cf7_crm_oAuth");e.find(".mipl_cf7_oauth_2_client_id").val(""),e.find(".mipl_cf7_oauth_2_client_secret").val(""),e.find(".mipl_cf7_client_secret, .mipl_cf7_client_id").css("display","none").css("display","none"),e.find(".mipl_cf7_c_secret, .mipl_cf7_c_id").attr("type","text").attr("type","text"),e.find("input[type=text], input[type=hidden]").removeAttr("readonly"),jQuery(this).css("display","none"),jQuery(".mipl_cf7_grant_permission_div").css("display","block"),jQuery(".mipl_cf7_successfully_generate_token").css("display","none");var _=jQuery(".post_id").val();jQuery(this).closest("form").serializeArray();return jQuery.get("?mipl-crm-action=reset_crm_oauth_details_form&id="+_,(function(e){resp=JSON.parse(e),"success"==resp.status&&jQuery(this).parents(".mipl_cf7_crm_oAuth").find(".mipl_grant_permission").css("display","block"),location.reload(!0)})),!1})),jQuery(".mipl_cf7_email_notification").length>0){var _=jQuery(".mipl_cf7_email_notification").prop("checked");jQuery(".mipl_required_mail_field").css("display","none"),_&&(jQuery(".mipl_required_mail_field").css("color","red"),jQuery(".mipl_required_mail_field").css("display","inline-block"))}jQuery(".mipl_cf7_email_notification").on("change",(function(){var e=jQuery(this).prop("checked");jQuery(".mipl_required_mail_field").css("display","none"),e&&(jQuery(".mipl_required_mail_field").css("color","red"),jQuery(".mipl_required_mail_field").css("display","inline-block"))}))})),jQuery(document).ready((function(){var e=__("Do you want to delete?");jQuery(".mipl_crm_form_submission").length>0&&($form_id=jQuery(".mipl_crm_form_submission").val(),""!=$form_id&&jQuery.post("?mipl-crm-action=mipl_cf7_form_data&form_id="+$form_id,(function(e){return $response=JSON.parse(e),void 0!==$response.status&&"error"==$response.status||jQuery(".mipl_cf7_hidden_form_data").val(e),!1})));var _=__("Select Field");jQuery(".mipl_cf7_fields").select2({placeholder:"--"+_+"--",allowClear:!0}),jQuery(".mipl_cf7_crm_form_fields_button").on("click",(function(){if($form_data=jQuery(".mipl_cf7_hidden_form_data").val(),"undefined"==$form_data||""==$form_data)return!1;$new_form_data=JSON.parse($form_data);var e=jQuery("#crm_add_more_row").html();for(var i in $option="<option value=''>--"+_+"--</option>",$new_form_data){var r=$new_form_data[i];"submit"!=r.basetype&&($option+='<option value="'+$form_id+"/"+r.name+'" data-type="'+r.basetype+'" data-index="'+i+'">'+__(r.name)+"<option>")}return jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table .mipl_cf7_crm_form_data_row:last-child").after(e),jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table .mipl_cf7_crm_form_data_row:last-child .mipl_cf7_form_fld_select2 select").html($option),jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table .select2_wc_fields").select2(),!1})),jQuery("body").on("click",".mipl_cf7_remove_fields_button",(function(){confirm(e)&&jQuery(this).parents(".mipl_cf7_crm_form_data_row").remove()})),jQuery(document).on("click",".mipl_crm_default_fields_button",(function(){jQuery(".crm_default_fields_table").append(jQuery("#crm_default_fields").html())})),jQuery("body").on("click","a.mipl_cf7_remove_default_fields_button.button",(function(){if(confirm(e))return jQuery(this).parents(".mipl_cf7_crm_default_fields_data").remove(),!1})),jQuery("body").on("change",".mipl_cf7_fields",(function(){$cf7_field=jQuery(this).find(":selected").data("type"),function(e="",_="",i=""){if($cf7_field=_,$options="",$option="<option value='text'> Text </option>",jQuery(e).parents(".mipl_cf7_crm_form_data_row").find(".mipl_cf7_form_fields_data_type select").html($option),"date"==$cf7_field){var r=["Default","Y-m-d","Y-m-d H:i:s","Y/m/d H:i:s","m/d/Y H:i:s","d/m/Y H:i:s"];jQuery.each(r,(function(e,_){$select="",e==r&&($select="selected"),$options+='<option value="'+_+'" '+$select+">"+_+"</option>"})),jQuery(e).parents(".mipl_cf7_crm_form_data_row").find(".mipl_cf7_form_fields_data_type select").html($options)}else if("file"==$cf7_field){r={file_object:"File Object",file_url:"File URL"};jQuery.each(r,(function(e,_){$select="",e==r&&($select="selected"),$options+='<option value="'+e+'" '+$select+">"+_+"</option>"})),jQuery(e).parents(".mipl_cf7_crm_form_data_row").find(".mipl_cf7_form_fields_data_type select").html($options),"multipart/form-data"!=jQuery('[name="mipl_cf7_crm_details[content_type]"]').val()&&alert("Content type must be multipart/form-data")}}(jQuery(this),$cf7_field)}))})),jQuery(document).ready((function(){jQuery("body").on("click",".mipl_cf7_add_form_fields",(function(){var e=jQuery(".mipl_crm_select_form").attr("data-value"),_=jQuery(".mipl_crm_select_form").val(),i=__("Are you sure want to change option ?");if(""!=e.trim()&&!confirm(i))return!1;jQuery(".mipl_crm_form_submission").val(_),$form_id=jQuery(".mipl_crm_select_form").val(),jQuery.post("?mipl-crm-action=mipl_cf7_form_data&form_id="+$form_id,(function(e){if($response=JSON.parse(e),void 0!==$response.status&&"error"==$response.status)return!1;jQuery(".mipl_cf7_hidden_form_data").val(e);var _=jQuery("#crm_add_more_row").html(),i=jQuery("#mipl_cf7_static_fields_label").html();for(var r in jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table").html(i),$option="<option value=''>--"+__("Select Field")+"--</option>",$response)"submit"!=(t=$response[r]).basetype&&($option+='<option value="'+$form_id+"/"+t.name+'" data-type="'+t.type+'" data-index="'+r+'">'+__(t.name)+"<option>");for(var r in $response){var t;if("submit"!=(t=$response[r]).basetype){jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table").append(_),jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table .mipl_cf7_crm_form_data_row:last-child .mipl_cf7_form_fld_select2 select").html($option),jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table .mipl_cf7_crm_form_data_row:last-child .mipl_cf7_form_fld_select2 select").val($form_id+"/"+t.name);var o="<option value='text'> Text </option>";if("date"==t.basetype){o="";var m=["Default","Y-m-d","Y-m-d H:i:s","Y/m/d H:i:s","m/d/Y H:i:s","d/m/Y H:i:s"];jQuery.each(m,(function(e,_){o+='<option value="'+_+'">'+_+"</option>"}))}else"file"==t.basetype&&(o="",m={file_object:"File Object",file_url:"File URL"},jQuery.each(m,(function(e,_){o+='<option value="'+e+'">'+_+"</option>"})));jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table .mipl_cf7_crm_form_data_row:last-child .mipl_cf7_form_fields_data_type select").html(o)}}return jQuery(".mipl_cf7_crm_main_form .mipl_crm_form_data_table .select2_wc_fields").select2(),!1})),jQuery(".mipl_crm_select_form").attr("data-value",_);var r=jQuery(".mipl_nonce").val(),t=jQuery(".mipl_cf7_post_id").val(),o=jQuery(".mipl_crm_form_submission").val(),m=new Array;return m.push({name:"form_id",value:o}),m.push({name:"mipl_cf7_nonce",value:r}),m.push({name:"mipl_cf7_post_id",value:t}),jQuery(".mipl_form_fields_name").html('<option value="">--'+__("Select")+"--</option>"),jQuery(".mipl_form_fields_value").html('<option value="">--'+__("Select")+"--</option>"),""==o||jQuery.post("?mipl-crm-action=mipl_cf7_fields_name",m,(function(e){response=JSON.parse(e);var _='<option value="">--'+__("Select")+"--</option>";jQuery.each(response,(function(e,i){_+='<option value="'+e+'">'+__(e)+"</option>"})),jQuery(".mipl_form_fields_name").html(_)})),!1})),jQuery("body").on("change",".mipl_crm_form_submission",(function(){$selected_value=jQuery(this).val(),jQuery(".mipl_crm_select_form").val($selected_value)})),jQuery(".mipl_cf7_CRM_setting_data").on("change",".mipl_form_fields_name",(function(){var e=jQuery(".mipl_nonce").val(),_=jQuery(".mipl_cf7_post_id").val(),i=jQuery(".mipl_crm_form_submission").val(),r=jQuery(this).val();if(""==r)return!1;var t=new Array;t.push({name:"field_name",value:r}),t.push({name:"form_id",value:i}),t.push({name:"mipl_cf7_nonce",value:e}),t.push({name:"mipl_cf7_post_id",value:_});var o='<option value="">'+__("Loading")+"....</option>";jQuery(".mipl_form_fields_value").html(o),jQuery.post("?mipl-crm-action=mipl_cf7_fields_value",t,(function(e){response=JSON.parse(e);var _='<option value="">--'+__("Select")+"--</option>";jQuery.each(response,(function(e,i){_+='<option value="'+i+'">'+__(e)+"</option>"})),jQuery(".mipl_form_fields_value").html(_)}))}))})),jQuery(document).ready((function(){jQuery(".mipl_testing_data_submission").on("click",(function(){var e=__("Submitting");jQuery(this).text(e+"...");jQuery(this).closest("form").serializeArray();var _=jQuery(".mipl_cf7_cf_toggal_modal").attr("data-id"),i=new FormData(jQuery(this).closest("form")[0]);jQuery.ajax({data:i,type:"post",url:"?mipl-crm-action=crm_testing_data&id="+_,contentType:!1,processData:!1,success:function(e){var _=JSON.parse(e);"success"==_.status?jQuery(".mipl_testing_submission_message").html('<div class="mipl_success_body"><h4>CRM Response Body</h4><p>'+__("Success ")+" ["+__("Status Code: ")+" "+_.status_code+"]</p><textarea>"+_.message+"</textarea></div>"):($settime_code="",0==_.status_code&&"Settimeout error"==_.error&&($settime_code="// Add this code in active theme functions.php file<br>\n                        add_filter('mipl_cf7_crm_default_request_timeout', function($default_request_timeout){<br>\n                            return 60;<br>\n                        });<br>"),jQuery(".mipl_testing_submission_message").html('<div class="mipl_error_body"><h4>CRM Response Body</h4><p>'+__("Fail")+" ["+__("Status Code: ")+" "+_.status_code+']</p><p style="color:black">'+$settime_code+"</p><textarea>"+_.error+"</textarea></div>")),jQuery(".mipl_testing_data_submission").text(__("Submit"))}})}))}));